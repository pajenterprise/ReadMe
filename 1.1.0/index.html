<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>Clover SDK for Javascript Integration</h1><!---
!!NOTE!!  The following is automatically updated to reflect the npm version.
See the package.json postversion script, which maps to scripts/postversion.sh
Do not change this or the versioning may not reflect the npm version correctly.
--->
<p>Current version: 1.1.0</p>
<h2>Overview</h2><p>This SDK provides an API to allow your web application using Javascript to interface with a CloverÂ® Mini device (https://www.clover.com/pos-hardware/mini)</p>
<p>The API is available on <a href="https://github.com/clover/remote-pay-cloud">GitHub</a> for download, and can be used in conjunction with the proper browser framework from a NodeJS <code>require</code> directive, <a href="https://www.npmjs.com/package/remote-pay-cloud">hosted on NPM</a></p>
<ol>
<li>The remotepay/ICloverConnector is the high-level API with methods like <code>Sale()</code>, <code>VoidTransaction()</code>, <code>ManualRefund()</code>, etc.</li>
<li>The remotepay/ICloverConnectorListener is the high-level listener API that defines callback methods like <code>onSaleResponse</code>, <code>onRefundPaymentResponse</code>, etc.</li>
<li>The API includes objects that map to standard Clover objects such as <code>Payment</code>, <code>CardTransaction</code>, <code>Order</code>, etc.  These objects will match those defined in  <a href="https://github.com/clover/clover-android-sdk">clover-android-sdk</a></li>
</ol>
<p>The library requires the browser you use to support WebSockets. See <a href="http://caniuse.com/#feat=websockets">WebSocket Browser Support</a>.</p>
<p>For more developer documentation and information about the Semi-Integration program, please visit our [semi-integration developer documents] (https://docs.clover.com/build/integration-overview-requirements/). </p>
<h3>Browser Versions Tested</h3><p>This library has been tested against the following Browser type and versions:</p>
<ul>
<li>Chrome version 54</li>
<li>Firefox version 49</li>
</ul>
<h3>Examples</h3><h4>Application</h4><p>A sale/refund UI example project <a href="https://github.com/clover/clover-cloud-connector-example">Clover Cloud Connector Example</a> is available for download and deployment, or direct deployment to a Heroku server.</p>
<h4>Example Framework</h4><p>A example project composed of small examples <a href="https://github.com/clover/clover-cloud-connector-unit-examples">Clover Cloud Connector Unit Examples</a> is available for download and deployment, or direct deployment to a Heroku server.</p>
<p>Please report back to us any questions/comments/concerns, by emailing semi-integrations@clover.com.</p>
<h2>Release Notes</h2><h3>Version 1.1.0</h3><h3>Version 1.1.0-rc6.4</h3><p>SEMI-498 Revert update to use new schema objects.  New schema is slated for 1.2.</p>
<h3>Version 1.1.0-rc6.3 (deprecated)</h3><p>SEMI-498 Add ready checking before attempting remote calls.  Add request validation.  Inhibit multiple 'onReady' callbacks.  Update to use new schema objects.
SEMI-577 Add Declaration of support for Chrome version 54, Firefox version 49</p>
<h3>Version 1.1.0-rc6.2</h3><p>SEMI-541 Update remote pay cloud API classes to ver 1.1.0-rc5.1</p>
<h3>Version 1.1.0-rc6.1</h3><ul>
<li>SVR-899 Handle reconnect requests from the server.</li>
</ul>
<h3>Version 1.1.0-rc6.0</h3><ul>
<li>PAY-1258 Fix documentation.  Set up flow to capture &quot;REFUND_RESPONSE&quot; and extract any additional failure info.  Fix namespace issues.  Change flow to depend on ACK messages (when supported).  Extend ping/pong timeout check.</li>
</ul>
<h3>Version 1.1.0-rc5.1</h3><ul>
<li>SEMI-493: Allow suppression of log messages. Log messages are now suppressed by default.  To enable default logging:<pre class="prettyprint source"><code>require(&quot;remote-pay-cloud&quot;).DebugConfig.loggingEnabled = true;</code></pre></li>
</ul>
<h3>Version 1.1.0-rc5.0</h3><ul>
<li>SEMI-438: Remove dependency on 'prototype.js'</li>
</ul>
<h3>Version 1.1.0-RC2</h3><ul>
<li>SEMI-457: Add remoteApplicationId to required configuration.</li>
<li>SEMI-434: Add ability to read card data.</li>
<li>SEMI-423: Added backwards compatibility For older versions of android remote-pay ACK messages.</li>
</ul>
<h3>Version 1.1.0-RC1</h3><p>A deprecated beta version of the Connector (Clover.js) is included in this version with <code>require</code> directive syntax, but will removed in the future.</p>
<h3>Version <a href="https://github.com/clover/remote-pay-cloud-BETA/tree/BETA_Final">BETA</a></h3><p>The beta version includes the earliest library as well as a server with examples of the functions. </p>
<hr>
<h1>Quickstart</h1><p>Clover's cloud connector API.  Published as an NPM package.  Intended for use in a browser environment.</p>
<h2>At a Glance</h2><h3>Make a sale.</h3><pre class="prettyprint source"><code>var $ = require('jQuery');

var clover = require(&quot;remote-pay-cloud&quot;);
var log = clover.Logger.create();

var connector = new clover.CloverConnectorFactory().createICloverConnector({
    &quot;oauthToken&quot;: &quot;1e7a9007-141a-293d-f41d-f603f0842139&quot;,
    &quot;merchantId&quot;: &quot;BBFF8NBCXEMDV&quot;,
    &quot;clientId&quot;: &quot;3RPTN642FHXTX&quot;,
    &quot;remoteApplicationId&quot;: &quot;com.yourname.yourapplication:1.0.0-beta1&quot;,
    &quot;deviceSerialId&quot;: &quot;C031UQ52340015&quot;,
    &quot;domain&quot;: &quot;https://sandbox.dev.clover.com/&quot;
});

ExampleCloverConnectorListener  = function(cloverConnector) {
    clover.remotepay.ICloverConnectorListener.call(this);
    this.cloverConnector = cloverConnector;
};

ExampleCloverConnectorListener.prototype = Object.create(clover.remotepay.ICloverConnectorListener.prototype);
ExampleCloverConnectorListener.prototype.constructor = ExampleCloverConnectorListener;

ExampleCloverConnectorListener.prototype.onReady = function (merchantInfo) {
    var saleRequest = new clover.remotepay.SaleRequest();
    saleRequest.setExternalId(clover.CloverID.getNewId());
    saleRequest.setAmount(10000);
    this.cloverConnector.sale(saleRequest);
};
ExampleCloverConnectorListener.prototype.onVerifySignatureRequest = function (request) {
    log.info(request);
    this.cloverConnector.acceptSignature(request);
};
ExampleCloverConnectorListener.prototype.onSaleResponse = function (response) {
    log.info(response);
    connector.dispose();
    if(!response.getIsSale()) {
        console.error(&quot;Response is not an sale!&quot;);
        console.error(response);
    }
};

var connectorListener = new ExampleCloverConnectorListener(connector);
connector.addCloverConnectorListener(connectorListener);
connector.initializeConnection();

// Close the connection cleanly on exit.  This should be done with all connectors.
$(window).on('beforeunload ', function () {
    try {
        connector.dispose();
    } catch (e) {
        console.log(e);
    }
});</code></pre><h3>To make a payment using the High Level Cloud API</h3><h4>Import the libraries needed to create the clover object.</h4><pre class="prettyprint source"><code>var clover = require(&quot;remote-pay-cloud&quot;);</code></pre><h4>Create the Clover Connector object.</h4><p>This will require gathering the configuration information to create the connector.  In this example, the configuration is hard coded.  The creation of the connector is done using the connector factory.</p>
<pre class="prettyprint source"><code>var connector = new clover.CloverConnectorFactory().createICloverConnector({
    &quot;merchantId&quot;: &quot;BBFF8NBCXEMDT&quot;,
    &quot;clientId&quot;: &quot;3RPTN642FHXTC&quot;,
    &quot;remoteApplicationId&quot;: &quot;com.yourname.yourapplication:1.0.0-beta1&quot;,
    &quot;deviceSerialId&quot;: &quot;C031UQ52340045&quot;,
    &quot;domain&quot;: &quot;https://sandbox.dev.clover.com/&quot;
});</code></pre><p>There are several ways the Clover Connector object can be configured.</p>
<p>Examples of configurations that can be used when creating the Clover Connector object:</p>
<ol>
<li>With a clientID, domain, merchantId, deviceSerialId<pre class="prettyprint source"><code>{
&quot;clientId&quot; : &quot;3BZPZ6A6FQ8ZM&quot;,
&quot;remoteApplicationId&quot;: &quot;com.yourname.yourapplication:1.0.0-beta1&quot;,
&quot;domain&quot; : &quot;https://sandbox.dev.clover.com/&quot;,
&quot;merchantId&quot; : &quot;VKYQ0RVGMYHRS&quot;,
&quot;deviceSerialId&quot; : &quot;C021UQ52341078&quot;
}</code></pre></li>
<li>With a oauthToken, domain, merchantId, clientId, deviceSerialId<pre class="prettyprint source"><code>{
&quot;oauthToken&quot; : &quot;6e6313e8-fe33-8662-7ff2-3a6690e0ff14&quot;,
&quot;domain&quot; : &quot;https://sandbox.dev.clover.com/&quot;,
&quot;merchantId&quot; : &quot;VKYQ0RVGMYHRS&quot;,
&quot;clientId&quot; : &quot;3BZPZ6A6FQ8ZM&quot;,
&quot;remoteApplicationId&quot;: &quot;com.yourname.yourapplication:1.0.0-beta1&quot;,
&quot;deviceSerialId&quot; : &quot;C021UQ52341078&quot;
}</code></pre></li>
</ol>
<h4>Define a listener that will listen for events produced byt the Clover Connector.</h4><p>The functions implemented will be called as the connector encounters the events.  These functions can be found in the clover.remotepay.ICloverConnectorListener. </p>
<pre class="prettyprint source"><code>// This overrides/implements the constructor function.  This example
// expects that a clover connector implementation instance is passed to the created listener.
ExampleCloverConnectorListener  = function(cloverConnector) {
    clover.remotepay.ICloverConnectorListener.call(this);
    this.cloverConnector = cloverConnector;
};
ExampleCloverConnectorListener.prototype = Object.create(clover.remotepay.ICloverConnectorListener.prototype);
ExampleCloverConnectorListener.prototype.constructor = ExampleCloverConnectorListener;

// The ICloverConnectorListener function that is called when the device is ready to be used.
// This example starts up a sale for $100
ExampleCloverConnectorListener.prototype.onReady: function (merchantInfo) {
    var saleRequest = new clover.remotepay.SaleRequest();
    saleRequest.setExternalId(clover.CloverID.getNewId());
    saleRequest.setAmount(10000);
    this.cloverConnector.sale(saleRequest);
};

// The ICloverConnectorListener function that is called when the device needs to have a signature
// accepted, or rejected.
// This example accepts the signature, sight unseen
ExampleCloverConnectorListener.prototype.onVerifySignatureRequest = function (request) {
    log.info(request);
    this.cloverConnector.acceptSignature(request);
};

// The ICloverConnectorListener function that is called when a sale request is completed.
// This example logs the response, and disposes of the connector.  If the response is not an expected 
// type, it will log an error.
ExampleCloverConnectorListener.prototype.onSaleResponse = function (response) {
    log.info(response);
    connector.dispose();
    if(!response.getIsSale()) {
        console.error(&quot;Response is not an sale!&quot;);
        console.error(response);
    }
};</code></pre><h4>Add the listener instance to the connector, and initialize the connection to the device.</h4><pre class="prettyprint source"><code>var connectorListener = new ExampleCloverConnectorListener(connector);
connector.addCloverConnectorListener(connectorListener);
connector.initializeConnection();</code></pre><h4>Clean up the connection on exit of the window.  This should be done with all connectors.</h4><p>This example uses jQuery to add a hook for the window <code>beforeunload</code> event that ensures that the connector is displosed of.</p>
<pre class="prettyprint source"><code>$(window).on('beforeunload ', function () {
    try {
        connector.dispose();
    } catch (e) {
        console.log(e);
    }
});</code></pre><h2>Generate Documentation</h2><p>API documentation is generated when <code>npm install</code> is run. 
<a href="http://clover.github.io/remote-pay-cloud/1.1.0/">Online Docs</a> and
<a href="http://clover.github.io/remote-pay-cloud-api/1.1.0/">Online API class Docs</a></p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CardEntryMethods.html">CardEntryMethods</a></li><li><a href="Clover.html">Clover</a></li><li><a href="CloverConnectorImpl.html">CloverConnectorImpl</a></li><li><a href="CloverError.html">CloverError</a></li><li><a href="CloverID.html">CloverID</a></li><li><a href="CloverOAuth.html">CloverOAuth</a></li><li><a href="CloverOAuth2.html">CloverOAuth2</a></li><li><a href="DeviceContactInfo.html">DeviceContactInfo</a></li><li><a href="EndPointConfig.html">EndPointConfig</a></li><li><a href="Endpoints.html">Endpoints</a></li><li><a href="LanMethod.html">LanMethod</a></li><li><a href="RemoteMessageBuilder.html">RemoteMessageBuilder</a></li><li><a href="WebSocketDevice.html">WebSocketDevice</a></li><li><a href="XmlHttpSupport.html">XmlHttpSupport</a></li></ul><h3>Global</h3><ul><li><a href="global.html#DebugCloverConnectorListener">DebugCloverConnectorListener</a></li><li><a href="global.html#DelegateCloverConnectorListener">DelegateCloverConnectorListener</a></li><li><a href="global.html#KeyPress">KeyPress</a></li><li><a href="global.html#VoidReason">VoidReason</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Tue Jan 31 2017 12:08:42 GMT-0700 (MST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>