const TestUtils = require("./utils/TestUtils");

const CloverConnectorFactoryBuilder = require("../../dist/com/clover/remote/client/CloverConnectorFactoryBuilder").CloverConnectorFactoryBuilder;

/**
 * Validates request payloads generated by remote-pay-cloud against golden data.
 * Test case files located in ./unit-tests/request-validation.
 */
describe('RemoveConnectorListener()', function () {

    let cloverConnector, cloverConnectorListener = null;

    before(function () {
        let builderConfiguration = {};
        builderConfiguration[CloverConnectorFactoryBuilder.FACTORY_VERSION] = CloverConnectorFactoryBuilder.VERSION_12;
        let cloverConnectorFactory = CloverConnectorFactoryBuilder.createICloverConnectorFactory(builderConfiguration);
        cloverConnector = cloverConnectorFactory.createICloverConnector(TestUtils.getWSDeviceConfig());
        cloverConnectorListener = TestUtils.buildCloverConnectionListener();
        cloverConnector.addCloverConnectorListener(cloverConnectorListener);
        TestUtils.disableConsole();
        cloverConnector.initializeConnection();
        TestUtils.enableConsole();

    });

    it(`test removeCloverConnectorListener doesn't throw error`, function (done) {
        cloverConnector.removeCloverConnectorListener(cloverConnectorListener);
        cloverConnector.showMessage("message");

        done();
    });

});

